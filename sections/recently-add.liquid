<div class="recently-added-g c_section">
  <div class="grid_wrapper">
     <div class="desktop-12 tablet-12 mobile-12 span-12">
       <h2 class="big_title">{{ section.settings.section_r }}</h2>
       {% if section.settings.link_text != blank %}
       <p class="shop_all_link"><a href="{{section.settings.link}}">{{section.settings.link_text}}</a></p>
       {% endif %}
     </div>
    <div class="clear"></div>
  </div>  
  <div class="grid_wrapper product-loop tap_product_slider" id="recenty_added">
	{% assign products = collections.all.products | sort: 'published_at' | reverse %}
      {% assign number = section.settings.limit_p %}
  	{% for product in products limit: number %}
    <div class="desktop-4 tablet-2 mobile-half span-4">
    	{% render 'product-listing', product: product %}
    </div>
  	{% endfor %}
  </div>
</div>
{%comment %}
<script>
  (function(){    
    $(window).on('load resize', function() {

      if($(this).width() > 740) {
        $('#recenty_added').not('.slick-initialized').slick({
          autoplay: true,
          autoplaySpeed: 5000,
          slidesToShow: 3,
          slidesToScroll: 3,
          infinite: true,
          nextArrow: '<i class="la la-angle-right" aria-hidden="true"></i>',
          prevArrow: '<i class="la la-angle-left" aria-hidden="true"></i>',
          responsive: [
            {
              breakpoint: 740,
              settings: {
                slidesToShow: 2,
                slidesToScroll: 2
              }
            }
          ]
        });

      } else {
        if($('#recenty_added').hasClass('slick-initialized')){
          $('#recenty_added').slick('unslick');
        }
      }
    });
  })();
</script>
{% endcomment %}
{% schema %}
  {
    "name": "Recently Added Products",
    "settings": [
	  {
       "type":"text",
       "id":"section_r",
       "label":"Recently Added"
      },
      {
      	"type":"text",
      	"id":"link_text",
      	"label":"Link Text"
      },
      {
      	"type":"url",
      	"id":"link",
      	"label":"Link"
      },
	  {
        "type": "range",
        "id": "limit_p",
        "min": 3,
        "max": 13,
        "step": 1,
        "label": "Limit",
        "default": 6
      }
	]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
